<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Investimentos - Tekinformática</title>
    <link rel="icon" href="https://i.imgur.com/9qzolpP.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                        secondary: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            scroll-behavior: smooth;
        }
        
        .dashboard-card {
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            border: 1px solid rgba(226, 232, 240, 0.8);
        }
        
        .dashboard-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transform: translateY(-4px);
        }
        
        .btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            padding: 0.625rem 1.25rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-primary {
            background-color: #0ea5e9;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #0284c7;
        }
        
        .btn-secondary {
            background-color: #64748b;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #475569;
        }
        
        .btn-success {
            background-color: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #059669;
        }
        
        .btn-danger {
            background-color: #ef4444;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #dc2626;
        }
        
        .btn-warning {
            background-color: #f59e0b;
            color: white;
        }
        
        .btn-warning:hover {
            background-color: #d97706;
        }
        
        .header-gradient {
            background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 50%, #6366f1 100%);
        }
        
        input, select {
            border-radius: 10px;
            border: 1px solid #e2e8f0;
            padding: 0.625rem 1rem;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .table-header {
            background-color: #f1f5f9;
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .logo-text {
            background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 50%, #6366f1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* Hide file input visually but keep it accessible */
        .file-input {
            width: 0.1px;
            height: 0.1px;
            opacity: 0;
            overflow: hidden;
            position: absolute;
            z-index: -1;
        }
        
        .card-header {
            background: linear-gradient(to right, #f1f5f9, #e2e8f0);
            padding: 1rem;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .table-container {
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .table-row-hover:hover {
            background-color: #f8fafc;
        }
        
        .stat-card {
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100%;
            background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.2) 100%);
            transform: skewX(-15deg) translateX(50px);
            transition: transform 0.5s ease;
        }
        
        .stat-card:hover::after {
            transform: skewX(-15deg) translateX(150px);
        }
        
        .chart-container {
            position: relative;
            transition: transform 0.3s ease;
        }
        
        .chart-container:hover {
            transform: scale(1.02);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Header with modern gradient -->
    <header class="header-gradient text-white p-6 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center space-x-3 mb-4 md:mb-0">
                <div class="bg-white p-2 rounded-xl shadow-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-primary-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                        <line x1="8" y1="21" x2="16" y2="21"></line>
                        <line x1="12" y1="17" x2="12" y2="21"></line>
                    </svg>
                </div>
                <div>
                    <h1 class="text-3xl font-bold tracking-tight">Tekinformática</h1>
                    <p class="text-sm opacity-90 font-light">Dashboard Financeiro Pro</p>
                </div>
            </div>
            <div class="flex flex-wrap gap-3">
                <button id="importCSVBtn" class="btn btn-secondary group">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 transition-transform group-hover:-translate-y-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                    </svg>
                    Importar CSV Remoto
                </button>
                
                <label for="fileInput" class="btn btn-warning group cursor-pointer">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 transition-transform group-hover:-translate-y-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z" clip-rule="evenodd" />
                    </svg>
                    Importar Arquivo
                </label>
                <input type="file" id="fileInput" class="file-input" accept=".csv">
                
                <button id="exportBtn" class="btn btn-primary group">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 transition-transform group-hover:-translate-y-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM13.707 6.707a1 1 0 010-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 5.414V13a1 1 0 102 0V5.414l1.293 1.293a1 1 0 001.414 0z" clip-rule="evenodd" />
                    </svg>
                    Exportar
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content with modern spacing and layout -->
    <main class="container mx-auto py-8 px-4 space-y-8">
        <!-- Asset Name Input with modern card design -->
        <div class="dashboard-card animate__animated animate__fadeIn">
            <div class="card-header">
                <div class="flex flex-col md:flex-row md:items-center justify-between">
                    <h2 class="text-xl font-semibold text-gray-800 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-primary-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                        </svg>
                        Análise de Investimentos Financeiro
                    </h2>
                    <div class="mt-4 md:mt-0">
                        <a href="https://www.appsheet.com/start/6da24333-ecbc-49fc-af48-a7756a317871" target="_blank" class="btn btn-primary flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z" />
                            </svg>
                            Meus Investimentos
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Data Table with modern styling -->
            <div class="p-6">
                <div class="table-container mb-6">
                    <table class="min-w-full bg-white">
                        <thead class="bg-gray-50 text-gray-600 uppercase text-xs font-medium tracking-wider">
                            <tr>
                                <th class="px-6 py-3 text-left">ATIVO</th>
                                <th class="px-6 py-3 text-left">INVESTIDO (R$)</th>
                                <th class="px-6 py-3 text-left">LUCRO (%)</th>
                                <th class="px-6 py-3 text-left">TOTAL (R$)</th>
                                <th class="px-6 py-3 text-right">FUNÇÃO</th>
                            </tr>
                        </thead>
                        <tbody id="investmentTable" class="divide-y divide-gray-200">
                            <!-- Table rows will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="flex justify-end">
                    <button id="addItemBtn" class="btn btn-success group">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 transition-transform group-hover:rotate-90" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                        </svg>
                        Adicionar Item
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Summary Cards with modern design -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="dashboard-card p-6 stat-card bg-gradient-to-br from-blue-50 to-blue-100 animate__animated animate__fadeIn">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-700">Investido Total</h3>
                    <div class="p-2 bg-blue-100 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                </div>
                <p id="totalCost" class="text-3xl font-bold text-gray-900 mb-2">R$ 0,00</p>
                <p class="text-sm text-gray-500">Soma de todos os custos</p>
                <div class="absolute bottom-0 right-0 h-16 w-16 bg-blue-200 rounded-tl-full opacity-30"></div>
            </div>
            
            <div class="dashboard-card p-6 stat-card bg-gradient-to-br from-green-50 to-green-100 animate__animated animate__fadeIn animate__delay-1s">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-700">Valor Total com Lucro</h3>
                    <div class="p-2 bg-green-100 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                        </svg>
                    </div>
                </div>
                <p id="totalWithProfit" class="text-3xl font-bold text-green-600 mb-2">R$ 0,00</p>
                <p class="text-sm text-gray-500">Soma de custos + lucro</p>
                <div class="absolute bottom-0 right-0 h-16 w-16 bg-green-200 rounded-tl-full opacity-30"></div>
            </div>
            
            <div class="dashboard-card p-6 stat-card bg-gradient-to-br from-purple-50 to-purple-100 animate__animated animate__fadeIn animate__delay-2s">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-700">Lucro Total</h3>
                    <div class="p-2 bg-purple-100 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                </div>
                <p id="totalProfit" class="text-3xl font-bold text-purple-600 mb-2">R$ 0,00</p>
                <p class="text-sm text-gray-500">Diferença entre valor total e custo</p>
                <div class="absolute bottom-0 right-0 h-16 w-16 bg-purple-200 rounded-tl-full opacity-30"></div>
            </div>
        </div>
        
        <!-- Charts and Analysis with modern design -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="dashboard-card animate__animated animate__fadeIn">
                <div class="card-header">
                    <h3 class="text-lg font-medium text-gray-700 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-primary-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z" />
                        </svg>
                        Distribuição de Valores Totais
                    </h3>
                </div>
                <div class="p-6">
                    <div class="h-64 chart-container">
                        <canvas id="costChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-card animate__animated animate__fadeIn animate__delay-1s">
                <div class="card-header">
                    <h3 class="text-lg font-medium text-gray-700 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-primary-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                        </svg>
                        Análise Financeira
                    </h3>
                </div>
                <div class="p-6">
                    <div id="financialAnalysis" class="text-gray-700 space-y-3">
                        <div class="flex items-center p-4 bg-blue-50 rounded-lg">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-500 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <p>Adicione itens para gerar uma análise financeira detalhada.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Installment Plans with modern design -->
        <div class="dashboard-card animate__animated animate__fadeIn animate__delay-2s">
            <div class="card-header">
                <h3 class="text-lg font-medium text-gray-700 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-primary-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    Simulação de Ganhos Mensais
                </h3>
            </div>
            <div class="p-6">
                <div class="mb-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="relative">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Valor Total:</label>
                        <div class="relative">
                            <input type="text" id="installmentAmount" class="border border-gray-300 rounded-lg pl-10 pr-4 py-2 w-full focus:ring-2 focus:ring-primary-500 focus:border-primary-500" placeholder="0,00">
                            <span class="absolute left-3 top-2.5 text-gray-500">R$</span>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Taxa de Juros (%):</label>
                        <div class="relative">
                            <input type="number" id="interestRate" class="border border-gray-300 rounded-lg pl-4 pr-10 py-2 w-full focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="2.6" step="0.1">
                            <span class="absolute right-3 top-2.5 text-gray-500">%</span>
                        </div>
                    </div>
                    <div class="flex items-end">
                        <button id="calculateInstallments" class="btn btn-primary w-full group">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 transition-transform group-hover:scale-110" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                            </svg>
                            Calcular Parcelas
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="min-w-full bg-white">
                        <thead class="bg-gray-50 text-gray-600 uppercase text-xs font-medium tracking-wider">
                            <tr>
                                <th class="px-6 py-3 text-left">Parcelas</th>
                                <th class="px-6 py-3 text-left">Valor da Parcela (R$)</th>
                                <th class="px-6 py-3 text-left">Juros Total (R$)</th>
                                <th class="px-6 py-3 text-left">Valor Total (R$)</th>
                            </tr>
                        </thead>
                        <tbody id="installmentTable" class="divide-y divide-gray-200">
                            <!-- Installment rows will be added dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer with modern design -->
    <footer class="bg-gray-900 text-white py-10">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-3 mb-6 md:mb-0">
                    <div class="bg-white p-2 rounded-xl shadow-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-primary-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                            <line x1="8" y1="21" x2="16" y2="21"></line>
                            <line x1="12" y1="17" x2="12" y2="21"></line>
                        </svg>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold">Tekinformática</h2>
                        <p class="text-sm opacity-80">Dashboard Financeiro Pro</p>
                    </div>
                </div>
                <div class="text-center md:text-right">
                    <p class="text-sm opacity-80">© 2011 Tekinformática - Todos os direitos reservados</p>
                    <div class="flex justify-center md:justify-end space-x-4 mt-3">
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd"></path>
                            </svg>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path>
                            </svg>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Notification container -->
    <div id="notificationContainer" class="fixed top-4 right-4 z-50 space-y-4"></div>

    <script>
        // Global variables
        let investments = [];
        let chart = null;
        
        // Format number to Brazilian currency format
        function formatCurrency(value) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL',
                minimumFractionDigits: 2
            }).format(value);
        }
        
        // Parse Brazilian currency format to number
        function parseCurrency(value) {
            if (typeof value === 'number') return value;
            if (!value) return 0;
            
            // Remove currency symbol, dots and replace comma with dot
            return parseFloat(value.replace(/[^\d,.-]/g, '').replace(/\./g, '').replace(',', '.')) || 0;
        }
        
        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners
            document.getElementById('addItemBtn').addEventListener('click', addNewItem);
            document.getElementById('importCSVBtn').addEventListener('click', importCSVData);
            document.getElementById('exportBtn').addEventListener('click', exportData);
            document.getElementById('calculateInstallments').addEventListener('click', calculateInstallments);
            document.getElementById('fileInput').addEventListener('change', handleFileUpload);
            
            // Format installment amount input as currency
            const installmentAmountInput = document.getElementById('installmentAmount');
            installmentAmountInput.addEventListener('blur', function() {
                this.value = formatCurrency(parseCurrency(this.value));
            });
            
            // Initialize with empty data
            renderTable();
            initializeChart();
        });
        
        // Initialize empty chart
        function initializeChart() {
            const ctx = document.getElementById('costChart').getContext('2d');
            
            chart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Distribuição de Valores Totais',
                        data: [],
                        backgroundColor: [
                            'rgba(79, 70, 229, 0.8)',
                            'rgba(16, 185, 129, 0.8)',
                            'rgba(245, 158, 11, 0.8)',
                            'rgba(239, 68, 68, 0.8)',
                            'rgba(14, 165, 233, 0.8)',
                            'rgba(168, 85, 247, 0.8)'
                        ],
                        borderColor: [
                            'rgba(79, 70, 229, 1)',
                            'rgba(16, 185, 129, 1)',
                            'rgba(245, 158, 11, 1)',
                            'rgba(239, 68, 68, 1)',
                            'rgba(14, 165, 233, 1)',
                            'rgba(168, 85, 247, 1)'
                        ],
                        borderWidth: 2,
                        hoverOffset: 15,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '65%',
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                padding: 20,
                                font: {
                                    family: 'Inter',
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(30, 41, 59, 0.8)',
                            titleFont: {
                                family: 'Inter',
                                size: 14,
                                weight: 'bold'
                            },
                            bodyFont: {
                                family: 'Inter',
                                size: 13
                            },
                            padding: 12,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0) || 0;
                                    const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                                    return `${label}: ${formatCurrency(value)} (${percentage}%)`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
        }
        
        // Handle file upload
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) {
                showNotification('Nenhum arquivo selecionado.', 'error');
                return;
            }
            
            // Show loading notification
            showNotification('Carregando arquivo...', 'info');
            
            // Use FileReader to read the file content
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const csvContent = e.target.result;
                    
                    // Use PapaParse to parse CSV
                    Papa.parse(csvContent, {
                        header: true,
                        skipEmptyLines: true,
                        complete: function(results) {
                            if (results.data && results.data.length > 0) {
                                processCSVData(results.data);
                                showNotification('Arquivo importado com sucesso!', 'success');
                            } else {
                                showNotification('Arquivo vazio ou formato inválido.', 'error');
                            }
                        },
                        error: function(error) {
                            console.error("Error parsing file:", error);
                            showNotification('Erro ao processar o arquivo CSV.', 'error');
                        }
                    });
                } catch (error) {
                    console.error("Error reading file:", error);
                    showNotification('Erro ao ler o arquivo.', 'error');
                }
            };
            
            reader.onerror = function() {
                showNotification('Erro ao ler o arquivo.', 'error');
            };
            
            // Read the file as text
            reader.readAsText(file);
            
            // Reset file input
            event.target.value = '';
        }
        
        // Process CSV data
        function processCSVData(data) {
            investments = [];
            
            // Take up to 6 items from the CSV
            const itemCount = Math.min(data.length, 6);
            
            for (let i = 0; i < itemCount; i++) {
                const item = data[i];
                
                // Try to get values from different possible column names
                const name = item.Item || item.Nome || item.name || item.item || `Item ${i+1}`;
                let cost = 0;
                let profitPercent = 0;
                
                // Try to parse cost from different possible column names
                if (item.Custo !== undefined) cost = parseCurrency(item.Custo);
                else if (item.Cost !== undefined) cost = parseCurrency(item.Cost);
                else if (item.custo !== undefined) cost = parseCurrency(item.custo);
                else if (item.cost !== undefined) cost = parseCurrency(item.cost);
                else if (item.Valor !== undefined) cost = parseCurrency(item.Valor);
                else if (item.valor !== undefined) cost = parseCurrency(item.valor);
                
                // Try to parse profit percentage from different possible column names
                if (item.LucroPercent !== undefined) profitPercent = parseFloat(item.LucroPercent);
                else if (item.Lucro !== undefined) profitPercent = parseFloat(item.Lucro);
                else if (item.lucro !== undefined) profitPercent = parseFloat(item.lucro);
                else if (item.ProfitPercent !== undefined) profitPercent = parseFloat(item.ProfitPercent);
                else if (item.Profit !== undefined) profitPercent = parseFloat(item.Profit);
                else if (item.profit !== undefined) profitPercent = parseFloat(item.profit);
                
                investments.push({
                    name: name,
                    cost: cost || 0,
                    profitPercent: profitPercent || 0
                });
            }
            
            // Render the table
            renderTable();
            updateSummary();
            updateChart();
        }
        
        // Load CSV data from remote URL
        function importCSVData() {
            const csvUrl = "https://tekinf2025.github.io/investimentos/investimentos-csv.csv";
            
            // Show loading notification
            showNotification('Carregando dados do CSV remoto...', 'info');
            
            // Use PapaParse to fetch and parse the CSV
            Papa.parse(csvUrl, {
                download: true,
                header: true,
                skipEmptyLines: true,
                complete: function(results) {
                    if (results.data && results.data.length > 0) {
                        processCSVData(results.data);
                        showNotification('Dados importados com sucesso!', 'success');
                    } else {
                        showNotification('Erro ao carregar dados. Formato inválido ou vazio.', 'error');
                    }
                },
                error: function(error) {
                    console.error("Error loading CSV:", error);
                    showNotification('Erro ao carregar o arquivo CSV remoto.', 'error');
                }
            });
        }
        
        // Render the investment table
        function renderTable() {
            const tableBody = document.getElementById('investmentTable');
            tableBody.innerHTML = '';
            
            if (investments.length === 0) {
                const emptyRow = document.createElement('tr');
                emptyRow.innerHTML = `
                    <td colspan="5" class="px-6 py-6 text-center text-gray-500">
                        <div class="flex flex-col items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                            </svg>
                            <p class="font-medium">Nenhum item encontrado</p>
                            <p class="text-sm mt-1">Importe dados ou adicione itens manualmente</p>
                        </div>
                    </td>
                `;
                tableBody.appendChild(emptyRow);
                return;
            }
            
            investments.forEach((item, index) => {
                const totalValue = item.cost * (1 + item.profitPercent / 100);
                
                const row = document.createElement('tr');
                row.className = "table-row-hover transition-colors";
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <input type="text" value="${item.name}" class="border-0 bg-transparent w-full focus:ring-2 focus:ring-primary-500 rounded transition-all" 
                            onchange="updateItemName(${index}, this.value)">
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <input type="text" value="${formatCurrency(item.cost)}" class="border-0 bg-transparent w-full focus:ring-2 focus:ring-primary-500 rounded transition-all" 
                            onchange="updateItemCost(${index}, this.value)" onblur="formatInputCurrency(this, ${index})">
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="relative">
                            <input type="number" value="${item.profitPercent}" class="border-0 bg-transparent w-full focus:ring-2 focus:ring-primary-500 rounded transition-all" 
                                onchange="updateItemProfit(${index}, this.value)" step="0.01">
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900">
                        ${formatCurrency(totalValue)}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right">
                        <button onclick="removeItem(${index})" class="text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // Format input as currency
        function formatInputCurrency(input, index) {
            const value = parseCurrency(input.value);
            input.value = formatCurrency(value);
            investments[index].cost = value;
            updateSummary();
            updateChart();
        }
        
        // Update item name
        function updateItemName(index, value) {
            investments[index].name = value;
            updateSummary();
            updateChart();
        }
        
        // Update item cost
        function updateItemCost(index, value) {
            investments[index].cost = parseCurrency(value);
            updateSummary();
            updateChart();
        }
        
        // Update item profit percentage
        function updateItemProfit(index, value) {
            investments[index].profitPercent = parseFloat(value) || 0;
            renderTable();
            updateSummary();
            updateChart();
        }
        
        // Remove an item
        function removeItem(index) {
            investments.splice(index, 1);
            renderTable();
            updateSummary();
            updateChart();
            showNotification('Item removido com sucesso!', 'info');
        }
        
        // Add a new item
        function addNewItem() {
            investments.push({
                name: `Item ${investments.length + 1}`,
                cost: 0,
                profitPercent: 0
            });
            
            renderTable();
            updateSummary();
            updateChart();
            showNotification('Novo item adicionado!', 'success');
        }
        
        // Update summary calculations
        function updateSummary() {
            // Calculate totals
            const totalCost = investments.reduce((sum, item) => sum + item.cost, 0);
            const totalWithProfit = investments.reduce((sum, item) => sum + (item.cost * (1 + item.profitPercent / 100)), 0);
            const totalProfit = totalWithProfit - totalCost;
            
            // Update summary display with animation
            animateCounter('totalCost', totalCost);
            animateCounter('totalWithProfit', totalWithProfit);
            animateCounter('totalProfit', totalProfit);
            
            // Update financial analysis
            updateFinancialAnalysis(totalCost, totalWithProfit, totalProfit);
        }
        
        // Animate counter for better UX
        function animateCounter(elementId, targetValue) {
            const element = document.getElementById(elementId);
            const startValue = parseCurrency(element.textContent);
            const duration = 500; // ms
            const startTime = performance.now();
            
            function updateCounter(currentTime) {
                const elapsedTime = currentTime - startTime;
                const progress = Math.min(elapsedTime / duration, 1);
                
                // Easing function for smoother animation
                const easeOutQuad = progress * (2 - progress);
                
                const currentValue = startValue + (targetValue - startValue) * easeOutQuad;
                element.textContent = formatCurrency(currentValue);
                
                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                } else {
                    element.textContent = formatCurrency(targetValue);
                }
            }
            
            requestAnimationFrame(updateCounter);
        }
        
        // Update financial analysis text
        function updateFinancialAnalysis(totalCost, totalWithProfit, totalProfit) {
            const analysisElement = document.getElementById('financialAnalysis');
            const profitMargin = totalCost > 0 ? (totalProfit / totalCost) * 100 : 0;
            
            let analysisText = '';
            
            if (totalCost === 0) {
                analysisText = `
                    <div class="flex items-center p-4 bg-blue-50 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-500 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <p>Adicione itens para gerar uma análise financeira detalhada.</p>
                    </div>
                `;
            } else {
                let statusIcon, statusColor, statusMessage;
                
                if (profitMargin < 10) {
                    statusIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>`;
                    statusColor = 'bg-red-50 border-red-200';
                    statusMessage = 'Alerta: Margem de lucro abaixo de 10%. Considere revisar os custos ou aumentar as margens de lucro.';
                } else if (profitMargin >= 10 && profitMargin < 20) {
                    statusIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>`;
                    statusColor = 'bg-yellow-50 border-yellow-200';
                    statusMessage = 'Margem de lucro aceitável, mas há espaço para melhorias.';
                } else {
                    statusIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>`;
                    statusColor = 'bg-green-50 border-green-200';
                    statusMessage = 'Excelente margem de lucro! O negócio está performando bem.';
                }
                
                analysisText = `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div class="p-4 bg-blue-50 rounded-lg flex flex-col">
                            <span class="text-xs text-blue-500 font-semibold uppercase mb-1">Investido Total</span>
                            <span class="text-2xl font-bold text-gray-800">${formatCurrency(totalCost)}</span>
                        </div>
                        <div class="p-4 bg-green-50 rounded-lg flex flex-col">
                            <span class="text-xs text-green-500 font-semibold uppercase mb-1">Receita Total</span>
                            <span class="text-2xl font-bold text-gray-800">${formatCurrency(totalWithProfit)}</span>
                        </div>
                        <div class="p-4 bg-purple-50 rounded-lg flex flex-col">
                            <span class="text-xs text-purple-500 font-semibold uppercase mb-1">Lucro Total</span>
                            <span class="text-2xl font-bold text-gray-800">${formatCurrency(totalProfit)}</span>
                        </div>
                        <div class="p-4 bg-indigo-50 rounded-lg flex flex-col">
                            <span class="text-xs text-indigo-500 font-semibold uppercase mb-1">Margem de Lucro</span>
                            <span class="text-2xl font-bold text-gray-800">${profitMargin.toFixed(2)}%</span>
                        </div>
                    </div>
                    
                    <div class="p-4 ${statusColor} border rounded-lg flex items-start">
                        ${statusIcon}
                        <p class="font-medium">${statusMessage}</p>
                    </div>
                `;
            }
            
            analysisElement.innerHTML = analysisText;
        }
        
        // Update chart visualization
        function updateChart() {
            // Prepare data for chart - now using total values instead of just costs
            const labels = investments.map(item => item.name);
            const totalValues = investments.map(item => item.cost * (1 + item.profitPercent / 100));
            
            // Update chart data
            chart.data.labels = labels;
            chart.data.datasets[0].data = totalValues;
            
            // Update chart with animation
            chart.update('easeOutQuart');
        }
        
        // Calculate installment plans
        function calculateInstallments() {
            const amount = parseCurrency(document.getElementById('installmentAmount').value) || 0;
            const interestRate = parseFloat(document.getElementById('interestRate').value) || 4;
            const tableBody = document.getElementById('installmentTable');
            
            tableBody.innerHTML = '';
            
            if (amount <= 0) {
                showNotification('Por favor, insira um valor válido para calcular as parcelas.', 'error');
                return;
            }
            
            // Calculate installments for 1 to 12 months
            for (let i = 1; i <= 12; i++) {
                // Calculate compound interest
                const totalAmount = amount * Math.pow(1 + (interestRate / 100), i);
                const installmentAmount = totalAmount / i;
                const totalInterest = totalAmount - amount;
                
                const row = document.createElement('tr');
                row.className = "table-row-hover transition-colors";
                
                // Add animation delay for staggered appearance
                row.style.animation = `fadeIn 0.3s ease-in-out ${i * 0.05}s both`;
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap font-medium">
                        <div class="flex items-center">
                            <span class="bg-primary-100 text-primary-800 text-xs font-semibold px-2.5 py-1 rounded-full mr-2">${i}x</span>
                            ${i === 1 ? '<span class="text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full">À vista</span>' : ''}
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">${formatCurrency(installmentAmount)}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="${totalInterest > 0 ? 'text-red-600' : 'text-gray-600'}">${formatCurrency(totalInterest)}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap font-medium">${formatCurrency(totalAmount)}</td>
                `;
                
                tableBody.appendChild(row);
            }
            
            showNotification('Parcelas calculadas com sucesso!', 'success');
        }
        
        // Export data function
        function exportData() {
            if (investments.length === 0) {
                showNotification('Não há dados para exportar.', 'error');
                return;
            }
            
            try {
                // Create CSV content
                let csvContent = "Item,Custo,LucroPercent\n";
                
                investments.forEach(item => {
                    // Format values properly for CSV
                    const name = item.name.includes(',') ? `"${item.name}"` : item.name;
                    const cost = item.cost.toString().replace('.', ',');
                    const profit = item.profitPercent.toString().replace('.', ',');
                    
                    csvContent += `${name},${cost},${profit}\n`;
                });
                
                // Create download link using Blob
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                
                // Create a temporary anchor element
                const link = document.createElement('a');
                
                // Create a URL for the blob
                const url = window.URL.createObjectURL(blob);
                
                // Set link properties
                link.href = url;
                link.download = 'tekinformatica_investimentos.csv';
                link.style.display = 'none';
                
                // Add to document, click and remove
                document.body.appendChild(link);
                link.click();
                
                // Clean up
                setTimeout(() => {
                    document.body.removeChild(link);
                    window.URL.revokeObjectURL(url);
                }, 100);
                
                // Show success notification
                showNotification('Dados exportados com sucesso!', 'success');
            } catch (error) {
                console.error("Error exporting data:", error);
                showNotification('Erro ao exportar os dados.', 'error');
            }
        }
        
        // Show notification
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notificationContainer');
            
            // Create notification element
            const notification = document.createElement('div');
            
            // Set class based on notification type
            let bgColor, icon;
            switch(type) {
                case 'success':
                    bgColor = 'bg-green-500';
                    icon = `<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>`;
                    break;
                case 'error':
                    bgColor = 'bg-red-500';
                    icon = `<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>`;
                    break;
                default:
                    bgColor = 'bg-blue-500';
                    icon = `<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>`;
            }
            
            notification.className = `flex items-center px-4 py-3 rounded-lg shadow-lg ${bgColor} text-white mb-3 animate__animated animate__fadeInRight`;
            notification.innerHTML = `
                ${icon}
                <span>${message}</span>
                <button class="ml-auto focus:outline-none" onclick="this.parentElement.remove()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            `;
            
            // Add to container
            container.appendChild(notification);
            
            // Remove after 5 seconds
            setTimeout(() => {
                notification.classList.add('animate__fadeOutRight');
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 500);
            }, 5000);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'94869b1d26c66d57',t:'MTc0ODY5NTkyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
